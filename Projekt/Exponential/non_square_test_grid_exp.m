f = @(x, y) 0.75 * exp(-((9*x-2)^2 + (9*y-2)^2)/4) + ...
            0.75 * exp(-(9*x+1)^2 / 49 - (9*y+1)/10) + ...
            0.5 * exp(-((9*x-7)^2 + (9*y-3)^2)/4) - ...
            0.2 * exp(-(9*x-4)^2 - (9*y-7)^2);

dxf = @(x,y) - 0.75 * 9 * (9*x-2) * exp(-((9*x-2)^2 + (9*y-2)^2)/4) / 2 - ...
             0.75 * 18 * (9*x+1) * exp(-(9*x+1)^2 / 49 - (9*y+1)/10) / 49 - ...
             0.5 * 9 * (9*x-7) * exp(-((9*x-7)^2 + (9*y-3)^2)/4) / 2 + ...
             0.2 * 18 * (9*x-4) * exp(-(9*x-4)^2 - (9*y-7)^2);

dyf = @(x,y) - 0.75 * 9 * (9*y-2) * exp(-((9*x-2)^2 + (9*y-2)^2)/4) / 2 - ...
             0.75 * 9 * (9*y+1) * exp(-(9*x+1)^2 / 49 - (9*y+1)/10) / 10 - ...
             0.5 * 9 * (9*y-3) * exp(-((9*x-7)^2 + (9*y-3)^2)/4) / 2 + ...
             0.2 * 18 * (9*y-7) * exp(-(9*x-4)^2 - (9*y-7)^2);

X = rand(1,30);
Y = rand(1,30);

TRI = delaunay(X(:),Y(:));
tri = triangulation(TRI,X(:),Y(:));

triplot(tri);

figure
plot_spline_tri(tri,f,dxf,dyf,4)


% [X,Y] = meshgrid(linspace(0,1,25));
% T = [X(:),Y(:)];
% txy = pointLocation(tri,T);
% T = T(~isnan(txy));


